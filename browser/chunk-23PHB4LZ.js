import{a as I}from"./chunk-OWTP3IV2.js";import{$ as v,F as h,G as b,S as f,X as o,Z as g,_ as y,fb as w,m as p,ma as j,na as s,pa as c}from"./chunk-47ARZL35.js";import{a as d,b as m}from"./chunk-TMC7WMLO.js";function a(i,t){let u=!t?.manualCleanup;u&&!t?.injector&&v(a);let n=u?t?.injector?.get(c)??o(c):null,e;t?.requireSync?e=s({kind:0}):e=s({kind:1,value:t?.initialValue});let l=i.subscribe({next:r=>e.set({kind:1,value:r}),error:r=>{if(t?.rejectErrors)throw r;e.set({kind:2,error:r})}});return n?.onDestroy(l.unsubscribe.bind(l)),j(()=>{let r=e();switch(r.kind){case 1:return r.value;case 2:throw r.error;case 0:throw new b(601,"`toSignal()` called with `requireSync` but `Observable` did not emit synchronously.")}})}var U=(()=>{let t=class t{constructor(){this.products=s([]),this._http=o(w),this._endPoint=I.apiURL,this._injector=o(g),this.getProducts()}getProducts(){this._http.get(`${this._endPoint}/products/?sort=desc`).pipe(p(n=>n.map(e=>m(d({},e),{qty:1}))),h(n=>this.products.set(n))).subscribe()}getProductById(n){return y(this._injector,()=>a(this._http.get(`${this._endPoint}/products/${n}`)))}};t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=f({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();export{U as a};
