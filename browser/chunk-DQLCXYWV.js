import{a as E}from"./chunk-OWTP3IV2.js";import{Aa as L,Ba as V,Ca as F,Da as A,Ea as a,Fa as o,Ga as y,Ha as _,Ia as v,Ja as s,L as T,La as l,Ma as h,N as f,Na as R,O as x,Pa as q,Ra as C,S as I,Sa as b,X as u,db as B,fb as W,ha as d,m as P,vb as D,xa as j}from"./chunk-47ARZL35.js";import{d as k}from"./chunk-TMC7WMLO.js";var U="https://js.stripe.com/v3",N=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,G="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",O=function(){for(var e=document.querySelectorAll('script[src^="'.concat(U,'"]')),r=0;r<e.length;r++){var n=e[r];if(N.test(n.src))return n}return null},M=function(e){var r=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",n=document.createElement("script");n.src="".concat(U).concat(r);var t=document.head||document.body;if(!t)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return t.appendChild(n),n},Q=function(e,r){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"3.0.6",startTime:r})},m=null,S=null,g=null,z=function(e){return function(){e(new Error("Failed to load Stripe.js"))}},J=function(e,r){return function(){window.Stripe?e(window.Stripe):r(new Error("Stripe.js not available"))}},Y=function(e){return m!==null?m:(m=new Promise(function(r,n){if(typeof window>"u"||typeof document>"u"){r(null);return}if(window.Stripe&&e&&console.warn(G),window.Stripe){r(window.Stripe);return}try{var t=O();if(t&&e)console.warn(G);else if(!t)t=M(e);else if(t&&g!==null&&S!==null){var c;t.removeEventListener("load",g),t.removeEventListener("error",S),(c=t.parentNode)===null||c===void 0||c.removeChild(t),t=M(e)}g=J(r,n),S=z(n),t.addEventListener("load",g),t.addEventListener("error",S)}catch(w){n(w);return}}),m.catch(function(r){return m=null,Promise.reject(r)}))},Z=function(e,r,n){if(e===null)return null;var t=e.apply(void 0,r);return Q(t,n),t},p,X=!1,$=function(){return p||(p=Y(null).catch(function(e){return p=null,Promise.reject(e)}),p)};Promise.resolve().then(function(){return $()}).catch(function(i){X||console.warn(i)});var H=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];X=!0;var t=Date.now();return $().then(function(c){return Z(c,r,t)})};var K=(()=>{let e=class e{constructor(){this._http=u(W),this._url=E.serverURL}onProceedToPay(n){return this._http.post(`${this._url}/checkout`,{items:n}).pipe(P(t=>k(this,null,function*(){(yield H(E.stripeAPIKey))?.redirectToCheckout({sessionId:t.id})}))).subscribe({error:t=>console.error("Error",t)})}};e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();function te(i,e){if(i&1){let r=_();a(0,"tr")(1,"td",16),l(2),o(),a(3,"td",16),l(4),o(),a(5,"td",17),l(6),C(7,"currency"),o(),a(8,"td")(9,"button",18),v("click",function(){let c=f(r).$implicit,w=s(2);return x(w.removeItem(c.id))}),l(10," X "),o()()()}if(i&2){let r=e.$implicit;d(2),h(r.title),d(2),h(r.qty),d(2),h(b(7,3,r.price))}}function re(i,e){if(i&1){let r=_();a(0,"div",4)(1,"div",5)(2,"button",6),v("click",function(){f(r);let t=s();return x(t.clearAll())}),l(3,"Clear all"),o()(),a(4,"table",7)(5,"thead")(6,"tr")(7,"th",8),l(8," Name"),o(),a(9,"th",9),l(10,"Qty"),o(),a(11,"th",9),l(12,"Price"),o(),y(13,"th",9),o()(),a(14,"tbody"),F(15,te,11,5,"tr",null,V),o(),a(17,"tfoot")(18,"tr")(19,"td",10),y(20,"hr",11),o()(),a(21,"tr")(22,"td",12),l(23,"Total:"),o(),a(24,"td",13),l(25),C(26,"currency"),o()()()()(),a(27,"div",14)(28,"button",15),v("click",function(){f(r);let t=s();return x(t.onProceedToPay())}),l(29,"Pay"),o()()}if(i&2){let r=s();d(15),A(r.cartStore.products()),d(10),R("",b(26,1,r.cartStore.totalAmount())," ")}}function ne(i,e){i&1&&(a(0,"div",2)(1,"h3",19),l(2,"The shopping cart is empty"),o()())}var Se=(()=>{let e=class e{constructor(){this.cartStore=u(D),this._checkoutSvc=u(K)}onProceedToPay(){this._checkoutSvc.onProceedToPay(this.cartStore.products())}removeItem(n){this.cartStore.removeFromCart(n)}clearAll(){this.cartStore.clearCart()}};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=T({type:e,selectors:[["app-checkout"]],standalone:!0,features:[q],decls:7,vars:1,consts:[[1,"text-gray-600","body-font"],[1,"container","px-5","py-24","mx-auto"],[1,"flex","flex-col","w-full","mb-20","text-center"],[1,"mb-2","text-3xl","font-medium","text-gray-900","sm:text-4xl","title-font"],[1,"w-full","mx-auto","overflow-auto","lg:w-2/3"],[1,"flex","justify-end","p-2"],[1,"flex","px-8","py-2","text-lg","text-white","bg-orange-500","border-0","rounded","focus:outline-none","hover:bg-red-600",3,"click"],[1,"w-full","text-left","whitespace-no-wrap","table-auto"],[1,"px-4","py-3","text-sm","font-medium","tracking-wider","text-gray-900","bg-gray-100","rounded-tl","rounded-bl","title-font"],[1,"px-4","py-3","text-sm","font-medium","tracking-wider","text-gray-900","bg-gray-100","title-font"],["colspan","4"],[1,"border-gray-900","border-t-1"],["colspan","2"],[1,"px-4","py-3","text-lg","not-italic","font-bold","text-gray-900"],[1,"flex","w-full","pl-4","mx-auto","mt-4","lg:w-2/3"],[1,"flex","px-6","py-2","ml-auto","text-white","bg-orange-500","border-0","rounded","focus:outline-none","hover:bg-orange-600",3,"click"],[1,"px-4","py-3"],[1,"px-4","py-3","text-lg","text-gray-900"],[1,"flex","px-2","text-white","bg-orange-500","border-0","rounded","focus:outline-none","hover:bg-red-600",3,"click"],[1,"my-2","text-3xl","font-medium","text-gray-900","sm:text-4xl","title-font"]],template:function(t,c){t&1&&(a(0,"section",0)(1,"div",1)(2,"div",2)(3,"h1",3),l(4,"Checkout page"),o()(),j(5,re,30,3)(6,ne,3,0),o()()),t&2&&(d(5),L(5,c.cartStore.productsCount()?5:6))},dependencies:[B],encapsulation:2});let i=e;return i})();export{Se as default};
